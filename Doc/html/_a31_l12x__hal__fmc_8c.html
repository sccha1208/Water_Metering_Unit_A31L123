<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A31L12x F/W Packages: A31L12x_hal_fmc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.abov.co.kr"><img alt="Logo" src="abov_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A31L12x F/W Packages
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   <div id="projectbrief">ABOV Cortex-M0+ Core based MCUs Integrated Driver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1e771ff450ae847412a8c28572c155bb.html">SRC</a></li><li class="navelem"><a class="el" href="dir_b881fa65891697b29217b708c2d9cc70.html">A31L12x</a></li><li class="navelem"><a class="el" href="dir_d72bcdebf2409dffec47150f67fde8cc.html">Drivers</a></li><li class="navelem"><a class="el" href="dir_cc9dcb257ae3d5c255bd5426c63276bc.html">Source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">A31L12x_hal_fmc.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains all functions support for fmc firmware library on A31L12x.  
<a href="#details">More...</a></p>

<p><a href="_a31_l12x__hal__fmc_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae3273cd46e1816ecb351b03627a79c82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#ae3273cd46e1816ecb351b03627a79c82">HAL_FMC_FlashEntry</a> (void)</td></tr>
<tr class="memdesc:ae3273cd46e1816ecb351b03627a79c82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry of Flash Memory Control.  <a href="#ae3273cd46e1816ecb351b03627a79c82">More...</a><br /></td></tr>
<tr class="separator:ae3273cd46e1816ecb351b03627a79c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e897c8bc511682862346649423d5a84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#a5e897c8bc511682862346649423d5a84">HAL_FMC_FlashExit</a> (void)</td></tr>
<tr class="memdesc:a5e897c8bc511682862346649423d5a84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit of Flash Memory Control.  <a href="#a5e897c8bc511682862346649423d5a84">More...</a><br /></td></tr>
<tr class="separator:a5e897c8bc511682862346649423d5a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40346f2014c4d2b068c7b760e50a9e89"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#a40346f2014c4d2b068c7b760e50a9e89">HAL_FMC_FlashFunction</a> (uint32_t u32FncSel, uint32_t u32Addr, uint32_t *u32Buf)</td></tr>
<tr class="memdesc:a40346f2014c4d2b068c7b760e50a9e89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Page Erase/Write and Bulk(Chip) Erase.  <a href="#a40346f2014c4d2b068c7b760e50a9e89">More...</a><br /></td></tr>
<tr class="separator:a40346f2014c4d2b068c7b760e50a9e89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afecfcf9e9af4c487d2372387312e5d67"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#afecfcf9e9af4c487d2372387312e5d67">HAL_FMC_BulkErase</a> (uint32_t u32UserId)</td></tr>
<tr class="memdesc:afecfcf9e9af4c487d2372387312e5d67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Bulk(Chip) Erase Function.  <a href="#afecfcf9e9af4c487d2372387312e5d67">More...</a><br /></td></tr>
<tr class="separator:afecfcf9e9af4c487d2372387312e5d67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbef36e2ac9437bd006e86722fa51441"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#acbef36e2ac9437bd006e86722fa51441">HAL_FMC_PageErase</a> (uint32_t u32UserId, uint32_t u32Addr)</td></tr>
<tr class="memdesc:acbef36e2ac9437bd006e86722fa51441"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Page Erase Function.  <a href="#acbef36e2ac9437bd006e86722fa51441">More...</a><br /></td></tr>
<tr class="separator:acbef36e2ac9437bd006e86722fa51441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713d9e992681eaf9ebfa49287c996af1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#a713d9e992681eaf9ebfa49287c996af1">HAL_FMC_PageWrite</a> (uint32_t u32UserId, uint32_t u32Addr, uint32_t *u32Buf)</td></tr>
<tr class="memdesc:a713d9e992681eaf9ebfa49287c996af1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Page Write Function.  <a href="#a713d9e992681eaf9ebfa49287c996af1">More...</a><br /></td></tr>
<tr class="separator:a713d9e992681eaf9ebfa49287c996af1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4bd4075df354ca0e3c446a4956e98cf1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#a4bd4075df354ca0e3c446a4956e98cf1">flash_id1_reg</a></td></tr>
<tr class="separator:a4bd4075df354ca0e3c446a4956e98cf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5299fd591bb20880c9408802f829381"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#ae5299fd591bb20880c9408802f829381">flash_id2_reg</a></td></tr>
<tr class="separator:ae5299fd591bb20880c9408802f829381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01d09d01a79191fa3de4a0667a868f2b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#a01d09d01a79191fa3de4a0667a868f2b">flash_addr_code0</a></td></tr>
<tr class="separator:a01d09d01a79191fa3de4a0667a868f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54bc38ca7f01977f3089d0d0761765c4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a31_l12x__hal__fmc_8c.html#a54bc38ca7f01977f3089d0d0761765c4">flash_addr_code1</a></td></tr>
<tr class="separator:a54bc38ca7f01977f3089d0d0761765c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains all functions support for fmc firmware library on A31L12x. </p>
<dl class="section version"><dt>Version</dt><dd>1.00 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020-05-29 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>ABOV Application Team</dd></dl>
<p>Copyright(C) 2019, ABOV Semiconductor All rights reserved.</p>
<p>ABOV Disclaimer</p>
<p>IMPORTANT NOTICE ? PLEASE READ CAREFULLY ABOV Semiconductor ("ABOV") reserves the right to make changes, corrections, enhancements, modifications, and improvements to ABOV products and/or to this document at any time without notice. ABOV does not give warranties as to the accuracy or completeness of the information included herein. Purchasers should obtain the latest relevant information of ABOV products before placing orders. Purchasers are entirely responsible for the choice, selection, and use of ABOV products and ABOV assumes no liability for application assistance or the design of purchasers' products. No license, express or implied, to any intellectual property rights is granted by ABOV herein. ABOV disclaims all express and implied warranties and shall not be responsible or liable for any injuries or damages related to use of ABOV products in such unauthorized applications. ABOV and the ABOV logo are trademarks of ABOV. All other product or service names are the property of their respective owners. Information in this document supersedes and replaces the information previously supplied in any former versions of this document. 2020 ABOV Semiconductor All rights reserved </p>

<p class="definition">Definition in file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afecfcf9e9af4c487d2372387312e5d67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afecfcf9e9af4c487d2372387312e5d67">&#9670;&nbsp;</a></span>HAL_FMC_BulkErase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t HAL_FMC_BulkErase </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32UserId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Bulk(Chip) Erase Function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u32UserId</td><td>Check value for real chip erase User ID to check flash memory bulk erase </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result of FMC<ul>
<li>Success: 0</li>
<li>Fail: 9</li>
</ul>
</dd></dl>
<p>This function erases flash memory area with configure option area 1 to 3 </p>

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00223">223</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   uint32_t    result;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#ae3273cd46e1816ecb351b03627a79c82">HAL_FMC_FlashEntry</a>();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#a54bc38ca7f01977f3089d0d0761765c4">flash_addr_code1</a> = FLASH_ADDR_CD1 ^ FLASH_ADDR_CDXOR;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <span class="keywordflow">if</span>( u32UserId == 0x90E832CF )                         <span class="comment">// Ex) 0x90E832CF, The user ID may be changed by programmer</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      result = <a class="code" href="_a31_l12x__hal__fmc_8c.html#a40346f2014c4d2b068c7b760e50a9e89">HAL_FMC_FlashFunction</a>( FLASH_BULK_ERASE, 0, 0 );</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      result = FLASH_PGM_FAIL;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   <span class="keywordflow">if</span>( result )                  <span class="comment">// If fail</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      FMC-&gt;ERFLAG = 0x03uL;      <span class="comment">// Clear FMC related flag</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#a5e897c8bc511682862346649423d5a84">HAL_FMC_FlashExit</a>();</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div><div class="ttc" id="_a31_l12x__hal__fmc_8c_html_ae3273cd46e1816ecb351b03627a79c82"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#ae3273cd46e1816ecb351b03627a79c82">HAL_FMC_FlashEntry</a></div><div class="ttdeci">void HAL_FMC_FlashEntry(void)</div><div class="ttdoc">Entry of Flash Memory Control.</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00064">A31L12x_hal_fmc.c:64</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a5e897c8bc511682862346649423d5a84"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a5e897c8bc511682862346649423d5a84">HAL_FMC_FlashExit</a></div><div class="ttdeci">void HAL_FMC_FlashExit(void)</div><div class="ttdoc">Exit of Flash Memory Control.</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00094">A31L12x_hal_fmc.c:94</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a40346f2014c4d2b068c7b760e50a9e89"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a40346f2014c4d2b068c7b760e50a9e89">HAL_FMC_FlashFunction</a></div><div class="ttdeci">uint32_t HAL_FMC_FlashFunction(uint32_t u32FncSel, uint32_t u32Addr, uint32_t *u32Buf)</div><div class="ttdoc">Flash Page Erase/Write and Bulk(Chip) Erase.</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00120">A31L12x_hal_fmc.c:120</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a54bc38ca7f01977f3089d0d0761765c4"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a54bc38ca7f01977f3089d0d0761765c4">flash_addr_code1</a></div><div class="ttdeci">uint32_t flash_addr_code1</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00049">A31L12x_hal_fmc.c:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00049">flash_addr_code1</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00064">HAL_FMC_FlashEntry()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00094">HAL_FMC_FlashExit()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00120">HAL_FMC_FlashFunction()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="_a31_l12x__hal__fmc_8c_afecfcf9e9af4c487d2372387312e5d67_cgraph.svg" width="379" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ae3273cd46e1816ecb351b03627a79c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3273cd46e1816ecb351b03627a79c82">&#9670;&nbsp;</a></span>HAL_FMC_FlashEntry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_FMC_FlashEntry </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Entry of Flash Memory Control. </p>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function sets flash IDs for erase/write The HIRC should be enabled before flash functions. So, Do enable the HIRC if disabled The LVR should be enabled and set over 2.28V level before flash functions. So, Do enable the LVR and Set 2.28V level over if disabled The global interrupt should be diabled by s/w. So, Diable global interrupt </p>

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00064">64</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   uint32_t    WDT_WINDR;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#a4bd4075df354ca0e3c446a4956e98cf1">flash_id1_reg</a> = FLASH_ID1 ^ FLASH_IDXOR;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#ae5299fd591bb20880c9408802f829381">flash_id2_reg</a> = FLASH_ID2 ^ FLASH_IDXOR;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#a01d09d01a79191fa3de4a0667a868f2b">flash_addr_code0</a> = FLASH_ADDR_CD0 ^ FLASH_ADDR_CDXOR;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   SCUCG-&gt;PPCLKEN2_b.FMCLKE = 1;       <span class="comment">// Enable Flash Memory Control Clock</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   SCUCG-&gt;CLKSRCR_b.HIRCEN = 1;        <span class="comment">// Enable HIRC</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   NOP();</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   NOP();</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   NOP();</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   SCULV-&gt;LVRCR_b.LVREN = 0x00;        <span class="comment">// Enable LVR, the Level should be set 2.28V over in CONF_LVRCNFIG register of configure option page 1</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   SCUCC-&gt;NMISRCR_b.NMICON = 0;        <span class="comment">// Disable NMI</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   WDT_WINDR = WDT-&gt;WINDR;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   <span class="keywordflow">if</span>( WDT-&gt;CNT &lt; WDT_WINDR )</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      WDT-&gt;CNTR_b.CNTR = 0x6a;         <span class="comment">// Reload WDT Counter if WDT-&gt;CNT &lt; WDT_WINDR</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   DI();                               <span class="comment">// Disable global interrupt</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div><div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a01d09d01a79191fa3de4a0667a868f2b"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a01d09d01a79191fa3de4a0667a868f2b">flash_addr_code0</a></div><div class="ttdeci">uint32_t flash_addr_code0</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00048">A31L12x_hal_fmc.c:48</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a4bd4075df354ca0e3c446a4956e98cf1"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a4bd4075df354ca0e3c446a4956e98cf1">flash_id1_reg</a></div><div class="ttdeci">uint32_t flash_id1_reg</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00046">A31L12x_hal_fmc.c:46</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_ae5299fd591bb20880c9408802f829381"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#ae5299fd591bb20880c9408802f829381">flash_id2_reg</a></div><div class="ttdeci">uint32_t flash_id2_reg</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00047">A31L12x_hal_fmc.c:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00048">flash_addr_code0</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00046">flash_id1_reg</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00047">flash_id2_reg</a>.</p>

<p class="reference">Referenced by <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00223">HAL_FMC_BulkErase()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00260">HAL_FMC_PageErase()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00298">HAL_FMC_PageWrite()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="_a31_l12x__hal__fmc_8c_ae3273cd46e1816ecb351b03627a79c82_icgraph.svg" width="364" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5e897c8bc511682862346649423d5a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e897c8bc511682862346649423d5a84">&#9670;&nbsp;</a></span>HAL_FMC_FlashExit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_FMC_FlashExit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exit of Flash Memory Control. </p>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function clears flash IDs for erase/write </p>

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00094">94</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#a4bd4075df354ca0e3c446a4956e98cf1">flash_id1_reg</a> = 0;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#ae5299fd591bb20880c9408802f829381">flash_id2_reg</a> = 0;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#a01d09d01a79191fa3de4a0667a868f2b">flash_addr_code0</a> = 0;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#a54bc38ca7f01977f3089d0d0761765c4">flash_addr_code1</a> = 0;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   SCUCG-&gt;PPCLKEN2_b.FMCLKE = 0;       <span class="comment">// Disable Flash Memory Control Clock</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   EI();                               <span class="comment">// Enable global interrupt</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div><div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a01d09d01a79191fa3de4a0667a868f2b"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a01d09d01a79191fa3de4a0667a868f2b">flash_addr_code0</a></div><div class="ttdeci">uint32_t flash_addr_code0</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00048">A31L12x_hal_fmc.c:48</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a4bd4075df354ca0e3c446a4956e98cf1"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a4bd4075df354ca0e3c446a4956e98cf1">flash_id1_reg</a></div><div class="ttdeci">uint32_t flash_id1_reg</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00046">A31L12x_hal_fmc.c:46</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_ae5299fd591bb20880c9408802f829381"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#ae5299fd591bb20880c9408802f829381">flash_id2_reg</a></div><div class="ttdeci">uint32_t flash_id2_reg</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00047">A31L12x_hal_fmc.c:47</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a54bc38ca7f01977f3089d0d0761765c4"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a54bc38ca7f01977f3089d0d0761765c4">flash_addr_code1</a></div><div class="ttdeci">uint32_t flash_addr_code1</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00049">A31L12x_hal_fmc.c:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00048">flash_addr_code0</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00049">flash_addr_code1</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00046">flash_id1_reg</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00047">flash_id2_reg</a>.</p>

<p class="reference">Referenced by <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00223">HAL_FMC_BulkErase()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00260">HAL_FMC_PageErase()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00298">HAL_FMC_PageWrite()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="_a31_l12x__hal__fmc_8c_a5e897c8bc511682862346649423d5a84_icgraph.svg" width="356" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a40346f2014c4d2b068c7b760e50a9e89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40346f2014c4d2b068c7b760e50a9e89">&#9670;&nbsp;</a></span>HAL_FMC_FlashFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t HAL_FMC_FlashFunction </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32FncSel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32Addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>u32Buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Page Erase/Write and Bulk(Chip) Erase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u32FncSel</td><td>Select Flash Function<ul>
<li>FLASH_BULK_ERASE</li>
<li>FLASH_PAGE_ERASE</li>
<li>FLASH_PAGE_WRITE </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u32Addr</td><td>Address of erase/write<ul>
<li>Flash Memory: 0x00000000 ~ 0x0000FFFF</li>
<li>Configuration Option Area Page 1 ~ 3 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u32Buf</td><td>Write Data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function erases/writes flash memory and configure option area 1 to 3 </p>

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00120">120</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;{</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   uint32_t                i;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <span class="keyword">volatile</span> uint32_t*      pagebuffer;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   pagebuffer = &amp;FMC-&gt;PAGEBUF;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   FMC-&gt;ADR = <a class="code" href="_a31_l12x__hal__fmc_8c.html#a01d09d01a79191fa3de4a0667a868f2b">flash_addr_code0</a> ^ FLASH_ADDR_CDXOR;    <span class="comment">// Write 0x5FFFFFFF to FMC_ADR during the register is equal to 0x5FFFFF80;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   FMC-&gt;IDR1 = <a class="code" href="_a31_l12x__hal__fmc_8c.html#a4bd4075df354ca0e3c446a4956e98cf1">flash_id1_reg</a> ^ FLASH_IDXOR;           <span class="comment">// Identification Value 0</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   FMC-&gt;IDR2 = <a class="code" href="_a31_l12x__hal__fmc_8c.html#ae5299fd591bb20880c9408802f829381">flash_id2_reg</a> ^ FLASH_IDXOR;           <span class="comment">// Identification Value 1</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   FMC-&gt;CR = FLASH_CLR_PAGEBUF;                       <span class="comment">// Clear page buffer</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="keywordflow">for</span>( i = 0 ; i &lt; SECTOR_SIZE_BYTE / 4 ; i++ )</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">if</span>( u32FncSel == FLASH_PAGE_WRITE )</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;         *pagebuffer++ = *u32Buf++;                   <span class="comment">// To page write</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( u32FncSel == FLASH_PAGE_ERASE ) || ( u32FncSel == FLASH_BULK_ERASE ) )</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;         *pagebuffer++ = 0xFFFFFFFF;                  <span class="comment">// To page or bulk erase</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         <span class="keywordflow">return</span> FLASH_PGM_FAIL;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="keywordflow">if</span>( ( u32FncSel == FLASH_PAGE_WRITE ) || ( u32FncSel == FLASH_PAGE_ERASE ) )  <span class="comment">// Page Erase/Write</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">if</span>( u32Addr &lt; FLASH_START_ADDR )</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         FMC-&gt;ADR = u32Addr + FLASH_START_ADDR;          <span class="comment">// Flash Page Address to be erased or written</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         FMC-&gt;ADR = u32Addr;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( u32FncSel == FLASH_BULK_ERASE )              <span class="comment">// Bulk(Chip) Erase</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      FMC-&gt;BCR = FLASH_CHIPER_WOPT;                      <span class="comment">// For bulk erase including Configure Option Page 1/2/3</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      FMC-&gt;ADR = <a class="code" href="_a31_l12x__hal__fmc_8c.html#a54bc38ca7f01977f3089d0d0761765c4">flash_addr_code1</a> ^ FLASH_ADDR_CDXOR;    <span class="comment">// Identification Address for bulk erase</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">return</span> FLASH_PGM_FAIL;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <span class="keywordflow">if</span>( FMC-&gt;IDR1 != FLASH_ID1 )</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">return</span> FLASH_PGM_FAIL;        <span class="comment">// Check whether ID0 is ok or not</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keywordflow">if</span>( FMC-&gt;IDR2 != FLASH_ID2 )</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">return</span> FLASH_PGM_FAIL;        <span class="comment">// Check whether ID1 is ok or not</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <span class="keywordflow">if</span>( ( u32FncSel == FLASH_PAGE_WRITE ) || ( u32FncSel == FLASH_PAGE_ERASE ) )     <span class="comment">// Page Erase/Write</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">if</span>( ( FMC-&gt;ADR &gt;= FLASH_START_ADDR ) &amp;&amp; ( FMC-&gt;ADR &lt;= FLASH_END_ADDR ) )</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;         FMC-&gt;CR = FLASH_MEM_PGM_CODE | ( u32FncSel &amp; 0x0000000F );     <span class="comment">// Start flash page erase/write from here</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( FMC-&gt;ADR &gt;= CFG_OPT_SADDR ) &amp;&amp; ( FMC-&gt;ADR &lt;= CFG_OPT_EADDR ) )</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;         FMC-&gt;CR = FLASH_OPT_PGM_CODE | ( u32FncSel &amp; 0x0000000F );     <span class="comment">// Start configure page erase/write from here</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;         <span class="keywordflow">return</span> FLASH_PGM_FAIL;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( u32FncSel == FLASH_BULK_ERASE )  <span class="comment">// Bulk(Chip) Erase</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">if</span>( FMC-&gt;ADR != FLASH_ADDR_CD1 )</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <span class="keywordflow">return</span> FLASH_PGM_FAIL;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      FMC-&gt;CR = FLASH_BULK_CODE;             <span class="comment">// Start bulk(chip) erase from here</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">return</span> FLASH_PGM_FAIL;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keywordflow">while</span>( FMC-&gt;CR_b.FMBUSY ) {}              <span class="comment">// Check whether the busy bit. If time over, goes out with error.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keywordflow">if</span>( !FMC-&gt;ERFLAG_b.FMOPFLAG )</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span> FLASH_PGM_GOOD;     <span class="comment">// Success</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordflow">return</span> FLASH_PGM_FAIL;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div><div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a01d09d01a79191fa3de4a0667a868f2b"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a01d09d01a79191fa3de4a0667a868f2b">flash_addr_code0</a></div><div class="ttdeci">uint32_t flash_addr_code0</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00048">A31L12x_hal_fmc.c:48</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a4bd4075df354ca0e3c446a4956e98cf1"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a4bd4075df354ca0e3c446a4956e98cf1">flash_id1_reg</a></div><div class="ttdeci">uint32_t flash_id1_reg</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00046">A31L12x_hal_fmc.c:46</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_ae5299fd591bb20880c9408802f829381"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#ae5299fd591bb20880c9408802f829381">flash_id2_reg</a></div><div class="ttdeci">uint32_t flash_id2_reg</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00047">A31L12x_hal_fmc.c:47</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a54bc38ca7f01977f3089d0d0761765c4"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a54bc38ca7f01977f3089d0d0761765c4">flash_addr_code1</a></div><div class="ttdeci">uint32_t flash_addr_code1</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00049">A31L12x_hal_fmc.c:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00048">flash_addr_code0</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00049">flash_addr_code1</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00046">flash_id1_reg</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00047">flash_id2_reg</a>.</p>

<p class="reference">Referenced by <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00223">HAL_FMC_BulkErase()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00260">HAL_FMC_PageErase()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00298">HAL_FMC_PageWrite()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="_a31_l12x__hal__fmc_8c_a40346f2014c4d2b068c7b760e50a9e89_icgraph.svg" width="383" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="acbef36e2ac9437bd006e86722fa51441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbef36e2ac9437bd006e86722fa51441">&#9670;&nbsp;</a></span>HAL_FMC_PageErase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t HAL_FMC_PageErase </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32UserId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32Addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Page Erase Function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u32UserId</td><td>Check value for real page erase User ID to check flash memory page erase </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u32Addr</td><td>Target Address<ul>
<li>Flash Memory: 0x00000000 ~ 0x0000FFFF</li>
<li>Configuration Option Area Page 1 ~ 3 </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result of FMC<ul>
<li>Success: 0</li>
<li>Fail: 9</li>
</ul>
</dd></dl>
<p>This function erases flash memory area and configure option area </p>

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00260">260</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   uint32_t    result;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#ae3273cd46e1816ecb351b03627a79c82">HAL_FMC_FlashEntry</a>();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <span class="keywordflow">if</span>( u32UserId == 0xA901358F )    <span class="comment">// Ex) 0xA901358F, The user ID may be changed by programmer</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      result = <a class="code" href="_a31_l12x__hal__fmc_8c.html#a40346f2014c4d2b068c7b760e50a9e89">HAL_FMC_FlashFunction</a>( FLASH_PAGE_ERASE, u32Addr, 0 );</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      result = FLASH_PGM_FAIL;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <span class="keywordflow">if</span>( result )                     <span class="comment">// If fail</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      FMC-&gt;ERFLAG = 0x03uL;         <span class="comment">// Clear FMC related flag</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#a5e897c8bc511682862346649423d5a84">HAL_FMC_FlashExit</a>();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div><div class="ttc" id="_a31_l12x__hal__fmc_8c_html_ae3273cd46e1816ecb351b03627a79c82"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#ae3273cd46e1816ecb351b03627a79c82">HAL_FMC_FlashEntry</a></div><div class="ttdeci">void HAL_FMC_FlashEntry(void)</div><div class="ttdoc">Entry of Flash Memory Control.</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00064">A31L12x_hal_fmc.c:64</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a5e897c8bc511682862346649423d5a84"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a5e897c8bc511682862346649423d5a84">HAL_FMC_FlashExit</a></div><div class="ttdeci">void HAL_FMC_FlashExit(void)</div><div class="ttdoc">Exit of Flash Memory Control.</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00094">A31L12x_hal_fmc.c:94</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a40346f2014c4d2b068c7b760e50a9e89"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a40346f2014c4d2b068c7b760e50a9e89">HAL_FMC_FlashFunction</a></div><div class="ttdeci">uint32_t HAL_FMC_FlashFunction(uint32_t u32FncSel, uint32_t u32Addr, uint32_t *u32Buf)</div><div class="ttdoc">Flash Page Erase/Write and Bulk(Chip) Erase.</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00120">A31L12x_hal_fmc.c:120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00064">HAL_FMC_FlashEntry()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00094">HAL_FMC_FlashExit()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00120">HAL_FMC_FlashFunction()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="_a31_l12x__hal__fmc_8c_acbef36e2ac9437bd006e86722fa51441_cgraph.svg" width="383" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a713d9e992681eaf9ebfa49287c996af1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a713d9e992681eaf9ebfa49287c996af1">&#9670;&nbsp;</a></span>HAL_FMC_PageWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t HAL_FMC_PageWrite </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32UserId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32Addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>u32Buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Page Write Function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u32UserId</td><td>Check value for real page write User ID to check flash memory page write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u32Addr</td><td>Target Address<ul>
<li>Flash Memory: 0x00000000 ~ 0x0000FFFF</li>
<li>Configuration Option Area Page 1 ~ 3 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u32Buf</td><td>Write Data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result of FMC<ul>
<li>Success: 0</li>
<li>Fail: 9</li>
</ul>
</dd></dl>
<p>This function writes flash memory area and configure option area </p>

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00298">298</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;{</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   uint32_t    result;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#ae3273cd46e1816ecb351b03627a79c82">HAL_FMC_FlashEntry</a>();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keywordflow">if</span>( u32UserId == 0x4F17DC86 )       <span class="comment">// Ex) 0x4F17DC86, The user ID may be changed by programmer</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      result = <a class="code" href="_a31_l12x__hal__fmc_8c.html#a40346f2014c4d2b068c7b760e50a9e89">HAL_FMC_FlashFunction</a>( FLASH_PAGE_WRITE, u32Addr, u32Buf );</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      result = FLASH_PGM_FAIL;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">if</span>( result )                        <span class="comment">// If fail</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      FMC-&gt;ERFLAG = 0x03uL;            <span class="comment">// Clear FMC related flag</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="_a31_l12x__hal__fmc_8c.html#a5e897c8bc511682862346649423d5a84">HAL_FMC_FlashExit</a>();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div><div class="ttc" id="_a31_l12x__hal__fmc_8c_html_ae3273cd46e1816ecb351b03627a79c82"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#ae3273cd46e1816ecb351b03627a79c82">HAL_FMC_FlashEntry</a></div><div class="ttdeci">void HAL_FMC_FlashEntry(void)</div><div class="ttdoc">Entry of Flash Memory Control.</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00064">A31L12x_hal_fmc.c:64</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a5e897c8bc511682862346649423d5a84"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a5e897c8bc511682862346649423d5a84">HAL_FMC_FlashExit</a></div><div class="ttdeci">void HAL_FMC_FlashExit(void)</div><div class="ttdoc">Exit of Flash Memory Control.</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00094">A31L12x_hal_fmc.c:94</a></div></div>
<div class="ttc" id="_a31_l12x__hal__fmc_8c_html_a40346f2014c4d2b068c7b760e50a9e89"><div class="ttname"><a href="_a31_l12x__hal__fmc_8c.html#a40346f2014c4d2b068c7b760e50a9e89">HAL_FMC_FlashFunction</a></div><div class="ttdeci">uint32_t HAL_FMC_FlashFunction(uint32_t u32FncSel, uint32_t u32Addr, uint32_t *u32Buf)</div><div class="ttdoc">Flash Page Erase/Write and Bulk(Chip) Erase.</div><div class="ttdef"><b>Definition:</b> <a href="_a31_l12x__hal__fmc_8c_source.html#l00120">A31L12x_hal_fmc.c:120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00064">HAL_FMC_FlashEntry()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00094">HAL_FMC_FlashExit()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00120">HAL_FMC_FlashFunction()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="_a31_l12x__hal__fmc_8c_a713d9e992681eaf9ebfa49287c996af1_cgraph.svg" width="380" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a01d09d01a79191fa3de4a0667a868f2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01d09d01a79191fa3de4a0667a868f2b">&#9670;&nbsp;</a></span>flash_addr_code0</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t flash_addr_code0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00048">48</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00064">HAL_FMC_FlashEntry()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00094">HAL_FMC_FlashExit()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00120">HAL_FMC_FlashFunction()</a>.</p>

</div>
</div>
<a id="a54bc38ca7f01977f3089d0d0761765c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54bc38ca7f01977f3089d0d0761765c4">&#9670;&nbsp;</a></span>flash_addr_code1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t flash_addr_code1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00049">49</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00223">HAL_FMC_BulkErase()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00094">HAL_FMC_FlashExit()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00120">HAL_FMC_FlashFunction()</a>.</p>

</div>
</div>
<a id="a4bd4075df354ca0e3c446a4956e98cf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bd4075df354ca0e3c446a4956e98cf1">&#9670;&nbsp;</a></span>flash_id1_reg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t flash_id1_reg</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00046">46</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00064">HAL_FMC_FlashEntry()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00094">HAL_FMC_FlashExit()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00120">HAL_FMC_FlashFunction()</a>.</p>

</div>
</div>
<a id="ae5299fd591bb20880c9408802f829381"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5299fd591bb20880c9408802f829381">&#9670;&nbsp;</a></span>flash_id2_reg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t flash_id2_reg</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00047">47</a> of file <a class="el" href="_a31_l12x__hal__fmc_8c_source.html">A31L12x_hal_fmc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00064">HAL_FMC_FlashEntry()</a>, <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00094">HAL_FMC_FlashExit()</a>, and <a class="el" href="_a31_l12x__hal__fmc_8c_source.html#l00120">HAL_FMC_FlashFunction()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160; 1.8.15
</small></address>
</body>
</html>
